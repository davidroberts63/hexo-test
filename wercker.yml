box: node
dev:
  steps:
    - npm-install

# Build definition
build:
  # The steps that will be executed on build
  steps:
    - tcnksm/zip@0.2.0
    - script:
        code: |
          git submodule sync
          git submodule update --init
          npm install -g hexo-cli
          npm install -g phantomjs
          npm install
          hexo server &
          sleep 2
          phantomjs ./screenshots.js
    - tcnksm/zip:
        input: "screenshots"
        output: "site-screenshots"
deploy:
  steps:
    - tcnksm/ghr@0.2.0
    - tcnksm/ghr:
        token: $GITHUB_TOKEN
        input: "site-screenshots"
        version: v0.1.0         # Relase tag default is `pre-release`
        pre_release: true       # Relase as pre-release default is false
        replace: true           # Replace release if it exists
